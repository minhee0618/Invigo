<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>RSVP 통계</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="/dashboard.css"> 
</head>
<body>

  <header class="dashboard-header">
    <div class="inviId-info">
      <p id="invitationId"> 초대장 링크: <a id="openLink" href="#" target="_blank"></a></p>
    </div>
    <div class="user-info">
      <a id="mypageLink" class="user-link">
        <img id="icon-member" src="/image/icon-member.png">
        <span id="username" class="username" style="display: none;">사용자 이름</span>
      </a>
    </div>
  </header>

  <h1>초대 응답 현황</h1>

  <div class="summary" id="summary">로딩 중...</div>
  <canvas id="rsvpChart"></canvas>

  <h3>📋 응답자 목록</h3>
  <table>
    <thead>
      <tr>
        <th>이름</th>
        <th class="filter-th">참석
          <button class="filter-icon" id="attendFilterToggle">⏷</button>
          <ul class="filter-options hidden" id="attendFilterOptions">
            <li data-value="all">전체</li>
            <li data-value="yes">참석</li>
            <li data-value="no">불참</li>
          </ul>
        </th>
        <th>이메일</th>
        <th class="filter-th">리마인더 이메일
          <button class="filter-icon" id="reminderFilterToggle">⏷</button>
          <ul class="filter-options hidden" id="reminderFilterOptions">
            <li data-value="all">전체</li>
            <li data-value="yes">동의</li>
            <li data-value="no">비동의</li>
          </ul>
        </th>
        <th>시간</th>
      </tr>
    </thead>
    <tbody id="rsvpBody"></tbody>
  </table>

  <button id="ReminderSendBtn">리마인더 이메일 보내기</button>

  <div id="emailPopup" class="modal hidden">
    <div class="modal-content">
      <button id="cancelEmailBtn">&times;</button>
      <p id="emailPopupText" class="email-popup-title">0명에게 이메일을 발송할까요?</p>
      <div id="recipientList" class="recipient-list">
        <!--리스트가 동적으로 추가-->
      </div>  
      <button id="sendEmailBtn">보내기</button>
    </div>
  </div>

  <div id="emailResultPopup" class="modal hidden">
    <div class="modal-content">
      <button id="closeEmailResultBtn">&times;</button>
      <p id="emailResultText" class="email-popup-title">이메일 전송 결과</p>
      <ul id="emailResultList" class="email-result-list">
        <!--리스트가 동적으로 추가 -->
      </ul>
    </div>
  </div>

  <h3>📊 설문 통계</h3>
  <div id="surveyCharts"></div>

  <h3>💬 익명 메시지</h3>
  <div id="messageListContainer" class="message-list-container"></div>

  <script src="dashboard.js"></script>
</body>
</html>